<!DOCTYPE html>
<html lang="es">
<head>
  <meta charset="UTF-8">
  <meta name="viewport" content="width=device-width, initial-scale=1.0">
  <title>Noticias Torre칩n e Internacionales</title>
  <link href="https://cdn.jsdelivr.net/npm/bootstrap@5.3.2/dist/css/bootstrap.min.css" rel="stylesheet">

  <!-- Google Ads Autom치ticos -->
  <script async src="https://pagead2.googlesyndication.com/pagead/js/adsbygoogle.js?client=ca-pub-2125166334282472" crossorigin="anonymous"></script>

  <style>
    body {
      background: #f8f9fa;
      font-family: Arial, sans-serif;
    }
    header {
      background: #004085;
      color: white;
      padding: 15px;
      text-align: center;
    }
    .carousel-caption {
      background: rgba(0,0,0,0.6);
      padding: 10px;
      border-radius: 5px;
      text-align: center;
    }
    .news-section {
      margin: 40px auto;
      max-width: 1200px;
    }
    .news-card {
      margin-bottom: 20px;
    }
  </style>
</head>
<body>

<header>
  <h1>游닗 Noticias de Torre칩n e Internacionales</h1>
  <p>Se actualiza autom치ticamente cada 20 minutos</p>
</header>

<div id="carouselNoticias" class="carousel slide" data-bs-ride="carousel">
  <div class="carousel-inner" id="carousel-items">
    <!-- Noticias din치micas aqu칤 -->
  </div>
  <button class="carousel-control-prev" type="button" data-bs-target="#carouselNoticias" data-bs-slide="prev">
    <span class="carousel-control-prev-icon"></span>
  </button>
  <button class="carousel-control-next" type="button" data-bs-target="#carouselNoticias" data-bs-slide="next">
    <span class="carousel-control-next-icon"></span>
  </button>
</div>

<section class="news-section container">
  <h2 class="text-center mb-4">Noticias Detalladas</h2>
  <div class="row" id="news-list">
    <!-- Noticias detalladas aqu칤 -->
  </div>
</section>

<script>
  async function cargarNoticiasTorreon() {
    try {
      let url = "https://api.allorigins.win/get?url=" + encodeURIComponent("https://www.elsiglodetorreon.com.mx/local");
      let res = await fetch(url);
      let data = await res.json();

      let html = data.contents;
      let parser = new DOMParser();
      let doc = parser.parseFromString(html, "text/html");

      // Extraemos titulares y links
      let articles = doc.querySelectorAll(".article-card a");
      let noticias = [];
      articles.forEach((a, i) => {
        if (i < 10) { // solo 10 noticias recientes
          noticias.push({
            titulo: a.innerText.trim(),
            link: a.href,
            descripcion: "Noticia de El Siglo de Torre칩n.",
          });
        }
      });

      renderNoticias(noticias, "Torre칩n");
    } catch (err) {
      console.error("Error cargando Torre칩n:", err);
    }
  }

  function renderNoticias(noticias, fuente) {
    let carousel = document.getElementById("carousel-items");
    let lista = document.getElementById("news-list");
    carousel.innerHTML = "";
    lista.innerHTML = "";

    noticias.forEach((n, i) => {
      // Carrusel
      let active = i === 0 ? "active" : "";
      carousel.innerHTML += `
        <div class="carousel-item ${active}">
          <div class="d-flex justify-content-center align-items-center" style="height:300px; background:#343a40; color:white;">
            <div class="carousel-caption">
              <h5>${n.titulo}</h5>
              <a href="#noticia-${i}" class="btn btn-light btn-sm">Ver detalle</a>
            </div>
          </div>
        </div>
      `;

      // Noticias detalladas
      lista.innerHTML += `
        <div class="col-md-6 news-card" id="noticia-${i}">
          <div class="card shadow-sm">
            <div class="card-body">
              <h5 class="card-title">${n.titulo}</h5>
              <p class="card-text">${n.descripcion}</p>
              <a href="${n.link}" target="_blank" class="btn btn-primary">Leer m치s</a>
            </div>
          </div>
        </div>
      `;
    });
  }

  // Primera carga
  cargarNoticiasTorreon();
  // Recargar cada 20 minutos
  setInterval(cargarNoticiasTorreon, 20 * 60 * 1000);
</script>

<script src="https://cdn.jsdelivr.net/npm/bootstrap@5.3.2/dist/js/bootstrap.bundle.min.js"></script>
</body>
</html>
